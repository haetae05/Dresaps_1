# Domain 07: Economy & Market (경제 및 상점)

**기반 데이터**:
- **Consolidated Domains**: D01, D02, D04, D05, D06, D08, D09, D11, D12, D14, D13.
- **Principle**: "Sustainable Prosumerism" (지속 가능한 생산-소비 생태계).

---

## 1. Currency & Asset System (통화 및 자산)

### 1.1 Film (필름) - The Energy
**정의**: AI 이미지 생성 및 슬롯 활성화를 위한 **소모성 자원**.

- **Consumption Logic (From Domain 04)**:
  - **1 Slot = 1 Film**.
  - 유저가 활성화한 슬롯 개수만큼 차감. (3 Slot = -3 Films).
  - 차감 시점: 'Generate' 버튼 클릭 시 (선불).

- **Acquisition (획득 경로)**:
  - **Daily Free**: 매일 앱 접속 후 **첫 평가(First Evaluation)** 완료 시 기본 **5장** 지급. (From Domain 05).
  - **Membership**: BASIC(+5), PRO(+20) 멤버십 가입 시 일일 지급량 증대. (From Domain 07).
  - **Rewarded Ad**: 보상형 동영상 광고 1회 시청 시 **1장** 충전 (**일 최대 1회 제한** - 가치 보존 정책). (From Domain 05 & 07 Infra).
  - **Referral Bonus**: 친구 초대 시 **5~10장** 가변 지급 (Remote Config 'Hot Time' 적용). (From Domain 11).
  - **Style Cup Reward**: Top 20 달성 시 15장, Platinum 10장. (From Domain 06).
  - **Easter Eggs**: 개발자 모드(로고 10회), 태그 매니악 등 히든 미션 달성 시 1장. (From Domain 11).

- **Policy**:
  - **No Expiration**: 필름은 무제한 누적되며 당일 소멸되지 않음.
  - **Exchange**: 필름 20개 = 1 Ticket. (Pose Ticket or Mask Ticket).
  - **Refund**: 사용된 필름은 복구되지 않음. (단, 시스템 에러로 생성 실패 시 자동 롤백).

### 1.2 Ticket (티켓) - The Key
**정의**: 특정 기능을 해금하거나 전용 상점을 이용하기 위한 **특수 재화**.

- **Types**:
  - **Pose Ticket**: 포즈 상점 거래용.
  - **Mask Ticket**: 가면(Deco) 상점 거래용.
  - **Magazine Ticket**: **PRO Only**. 월간 매거진 커스텀 발행권. (From Domain 09).

- **Acquisition (No Direct IAP)**:
  - **Policy**: 일본 자금결제법(PSA) 등 글로벌 규제 준수를 위해 **직접 결제 불가**. (From Domain 14).
  - **Sources**:
    - **Activity**: 3일 연속 접속(Lock-in) 시 Mask Ticket 지급. (From Domain 05).
    - **Ranking**: Pose Shop Monthly Top 20 선정 시 Pose Ticket 10장. (From Domain 06).
    - **Membership**: PRO 구독 갱신 시 Magazine Ticket 1장 지급. (From Domain 09).

---

## 2. Membership Subscription (구독 모델)

**"광고 제거가 아닌, 명예와 기술을 산다." (BM v4.0)**

### 2.1 FREE Tier (Default)
- **Cost**: 0원.
- **Slot**: 3 Slots (Open).
- **Engine**: **Gemini Flash** (Standard Resolution).
- **Ad**: Feed Native Ads (7:1), Rewarded Ads, Interstitial Ads.
- **Benefit**: Daily Film 5장.

### 2.2 Dresaps BASIC
- **Cost**: 월 2,900원 / $2.99.
- **Slot**: 3 Slots.
- **Engine**: **Gemini Flash** (Standard Resolution).
- **Ad**: **광고 노출 유지** (BM v4.0 정책 - 구독자도 광고를 봐야 함).
- **Benefit**:
  - Daily Film **10장** (+5 Bonus).
  - Basic Badge.

### 2.3 Dresaps PRO (Target Product)
- **Cost**: 월 6,900원 / $6.99.
- **Slot**: 3 ~ 5 Slots (If Fashionista).
- **Engine**: **Gemini Pro** (High-Res, Texture Refinement). (From Domain 04).
- **Ad**: **광고 노출 유지**.
- **Exclusive Benefits (From D02/D08/D09)**:
  - 💎 **Magazine Ticket**: 매월 1회 '나만의 매거진' 발행권.
  - 🥇 **Gold Profile**: 닉네임 골드 컬러, 골드 배지, 상단 고정(Pin).
  - 🎁 **Film Support**: Daily Film **20장** (+15 Bonus).
  - 📸 **Visuals**: Detail Cut(질감), Zoom Cut(얼굴) 추가 생성.

### 2.4 Subscription Infrastructure (구독 연결)
구독 상태는 DB의 `users` 테이블에 `subscription_tier` 및 `expires_at` 컬럼으로 관리되며, 매 API 호출 시 미들웨어(Middleware)가 이를 검증하여 Gemini Flash/Pro 모델을 분기(Routing)한다.

---

## 3. Revenue Architecture (수익 구조)

### 3.1 Ad System (From Domain 05)
- **Native Feed Ad**:
  - 비율: 게시물 7개당 1개 (**7:1 Ratio**).
  - 로직: `Feed Index > 0 && Index % 7 == 0`.
  - 타겟: **전체 유저 (구독자 포함)**.

- **Rewarded Ad**:
  - 트리거: 필름(Film) 잔액 0일 때 'Generate' 시도 시.
  - 제한: **일 1회** (00:00 KST 초기화).
  - 보상: 영상 시청 완료 시 **+1 Film**.

- **Creator Rev-Share (From Domain 08)**:
  - **Fashionista** 게시물의 상세 화면(Detail View) 하단 배너 광고 수익의 일부를 해당 크리에이터에게 환원.

### 3.2 Marketplace (User-to-User)
- **Target**: Pose, Mask(Deco) 아이템 거래.
- **Fee Structure (Differential Split)**:
  - **Regular User (일반)**: 판매 수익의 **4%**만 정산.
    *(1:24 Ratio - 어뷰징 방지 및 인플레이션 억제).*
  - **Fashionista (Creator)**: 판매 수익의 **80%** 수익 배분.
    *(Pro-Creator 인센티브).*

- **Restrictions (From Domain 12)**:
  - **Reputation Gate**: 평판 점수 **90점 미만**인 유저는 상점 등록 및 판매가 **차단됨**.
  - **Survival Logic (From Domain 04)**: 사용된 게시물이 **0개**가 되면 상점 목록에서 자동 비노출(Delisting).

- **Settlement**: 월 1회, 일정 금액 이상일 때 외부 페이먼트(Stripe/PayPal) 정산 (패셔니스타 한정).

### 3.3 Data Monetization (B2B)
- **Product**: 익명화된 신체 데이터(Body Data) + 스타일 선호도(Style Cup) 리포트.
- **Customer**: 의류 브랜드, 패션 커머스 기업.

### 3.4 AI Commerce Gateway (커머스 연동 수익)
유저의 게시물을 '쇼핑의 시작점'으로 전환시키는 핵심 수익 모델.

1.  **Look-Alike Recommendation (유사 상품 추천)**
    - **UI/UX**: 게시물 상세 화면의 왼쪽 화살표(Chevron) 클릭 시, **3x3 그리드(Grid)** 형태의 상품 추천 오버레이가 펼쳐진다. (빈 공간 클릭 시 닫힘).
    - **AI Logic**: 게시물 속 의상(Top/Bottom/Shoes)의 색상, 패턴, 핏을 Local Server/Cloud AI가 분석하여 제휴 쇼핑몰(Partners)의 가장 유사한 상품을 매칭한다.
    - **Revenue Model**:
        - **CPS (Cost Per Sale)**: 유저가 링크를 타고 구매 시 판매액의 **3~5%** 수수료 수취.
        - **CPC (Cost Per Click)**: 단순 클릭 발생 시 소정의 광고비 수취.

### 3.5 Brand Solution (B2B 중개 수익)
패셔니스타와 브랜드 간의 협업을 연결하고 관리하는 대행 수수료.

1.  **Agency Fee (중개 수수료)**
    - 브랜드가 패셔니스타에게 광고 집행(Sponsorship)을 요청할 때, 플랫폼이 계약 및 정산을 대행하며 계약금의 **10~20%**를 수수료로 수취한다.

---

## 4. Shop Infrastructure (상점 인프라)

### 4.1 Mask Shop (Web Studio)
- **Platform**: PC Web (Roblox Style Studio).
- **Process**:
  1. User creates 3D Mask (Free).
  2. User uploads to Shop (Consumes **Mask Ticket**).
  3. Admin Review (Safety Check).
  4. Public Listing.

### 4.1.1 PC Web Studio Spec (Roblox-style)
- **Environment**: **PC Web Only** (모바일 앱 지원 불가).
- **Base Asset**: 시스템이 제공하는 '기본 가면(Base Mask)' 또는 유저가 이전에 만든 내 가면을 불러옴.

- **Editing Rules**:
  - **Exterior Only**: 가면의 **바깥쪽(Exterior)** 표면에만 블록/재질 부착 가능 (안쪽 얼굴 닿는 면 불가).
  - **No Floating**: 모든 파츠는 가면 표면 또는 다른 파츠에 **물리적으로 연결(Attached)**되어야 함 (공중 부양 파츠 저장 불가).
  - **Center Lock**: 작업 화면의 중앙은 항상 가면의 중심축(Center)에 고정됨.

- **Block System**:
  - 다양한 재질(Material), 모양(Shape), 크기(Scale)를 자유자재로 변형 가능한 블록 시스템 제공.

- **Sync & Registration**:
  - **Save**: 작업물은 PC 로컬 저장소 및 서버 '저장고(Vault)'에 코드로 저장됨.
  - **Link to App**: 웹/앱에서 **[유저 코드 + 이메일 + 비밀번호]** 입력 시, 해당 가면 데이터가 마이페이지와 연동(Import)되어 상점 등록이 가능해짐.

### 4.2 Pose Shop
- **Platform**: Mobile App.
- **Process**:
  1. User records Motion Data (Timer + Skeleton Extraction).
  2. User uploads to Shop (Consumes **Pose Ticket**).
  3. Auto-Rigging Check (From Domain 11 - ViewShot 호환성).
  4. Public Listing.

---

## 5. Security & Legal (보안 및 규제)

### 5.1 Refund Policy (From Domain 12)
- **Consumables**: 사용된 필름 및 티켓은 원칙적으로 **환불 불가**.
- **Subscription**: 해지 시 다음 결제일 전날까지 혜택 유지 후 종료. (일할 계산 없음).

### 5.2 Global Compliance (From Domain 14)
- **PSA (Japan)**: 유료 결제로 획득한 포인트(Coin)가 없으므로 '공탁금 의무' 없음. 모든 재화는 '구독 혜택' 또는 '보상'으로 정의.
- **Display**: 통화 기호 및 가격 표시는 `Intl.NumberFormat`을 준수하여 로컬라이징.

---

## 6. Infrastructure Protocols (Wallet & Ledger)

**[Domain 13]**의 Supabase 환경에서 경제 시스템의 투명성을 보장하고 어뷰징을 차단하기 위한 DB 설계 원칙.

### 6.1 Dual-Balance Architecture (이원화 지갑)
'무료 재화'와 '수익성 재화'를 분리하여 정산 리스크를 제거한다.
1.  **Free Balance (무료)**: 출석, 광고 시청, 이벤트로 획득. AI 생성에만 사용 가능하며 정산 불가능.
2.  **Revenue Balance (수익)**: 포즈/가면 판매로 획득. AI 생성에 사용 가능하며, 패셔니스타 등급은 현금 인출(Cash-out) 가능.
3.  **Spending Priority**: 소비 시 항상 **Free Balance가 먼저 차감(First-Out)**된다.

### 6.2 The Ledger System (거래 장부)
1.  **Immutable Logs**: 모든 필름/티켓의 증감은 `transactions` 테이블에 기록된다. (단순 수치 변경 금지).
2.  **Reconciliation (대사)**: 유저의 현재 잔고는 주기적으로 트랜잭션 내역의 총합과 대조하여, 불일치 시 계정을 자동 동결(Freeze)한다.

### 6.3 Anti-Abusing Limits (물리적 제한)
1.  **Ad Reward Cap**: 보상형 광고를 통한 필름 획득은 **일일 최대 1회**로 제한된다. (매크로 방지 및 가치 보존).
2.  **Cool-down**: 광고 시청 시점부터 24시간 쿨타임 또는 매일 00:00(KST) 초기화 로직을 적용한다.